<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/html" xmlns="http://www.w3.org/1999/html">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<title>Регистрация</title>
	<link rel="stylesheet" href="css/stylereg.css">
    <link rel="stylesheet" href="css/stylemenu.css" type="text/css"/>
    <style>
        body
        {
            font: 12px 'Lucida Sans Unicode', 'Trebuchet MS', Arial, Helvetica;    
            margin: 0;
            background: url(images/bg.png) repeat; 
    }
    </style>
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"> </script>
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
    <script type="text/javascript" src="js/md5.js"></script>
    <script type="text/javascript">
        function onButton() {
            var login = document.getElementById("user").value;
            var pass = document.getElementById("pass").value;
            var md5 = hex_md5(pass);
            var name = document.getElementById("name").value;
            var surname = document.getElementById("surname").value;
            var middlename = document.getElementById("middlename").value;
            var passport= document.getElementById("passport").value;
            var birthday = document.getElementById("birthday").value;


            $.ajax({
                type: "GET",
                url: "/rest/api/clients/register?login=" + login + "&pass=" + md5 + "&name=" + name + "&surname=" +
                        surname + "&middlename=" + middlename +"&passport=" + passport + "&birthday=" + birthday,
                success: function (msg) {
                    //console.log(msg);
                    if (msg == "register success")
                    {
                        alert("Регистрация прошла успешно! Спасибо Вам, за использование нашего сервиса.");
                        document.location.replace("http://localhost:8081/auth.html");
                    }
                    else
                    {
                        alert("bad");
                    }
                }
            });
        }
    </script>




    <script type="text/javascript">
        function onlyPassport(evt) {

            var theEvent = evt || window.event;
            var key = theEvent.keyCode || theEvent.which;
            key = String.fromCharCode( key );
            var regex = /[0-9]  /;

            if( !regex.test(key) ) {
                theEvent.returnValue = false;
                if(theEvent.preventDefault)
                    theEvent.preventDefault();
            }
        }
    </script>

</head>

<body>
<div id="wrapper">
    <div id="content">
		
        <nav>
            <ul id="appleNav">
                <li><a href="index.html" title="Главная">Главная</a></li>
                <li><a href="#" title="Отели">Отели</a></li>
                <li><a href="#" title="Услуги">Услуги</a></li>
                <li><a href="#" title="Персоонал">Персоонал</a></li>
                <li><a href="#" title="Отдых">Отдых</a></li>
                <li><a href="auth.html" title="Авторизация">Авторизация</a></li>
                <li><a href="registration.html" title="Регистрация">Регистрация</a></li>
                <li><a href="#" title="Контакты">Контакты</a></li>
                <li>
                    <form>
                        <input type="text" />
                    </form>
                </li>
            </ul>
        </nav>
	   </div>
    </div>

<table align = "center">
    <td align = "center">
    <p align="center"><font size="+2">Регистрация</font></p>
    </br>

    <fieldset id="inputs">
        <input id="user" type="text" placeholder="Логин" autofocus required></br>
        <input id="pass" type="password" placeholder="Пароль" required>   </br>
        <input id="name" type="text" placeholder="Имя" autofocus required>  </br>
        <input id="surname" type="text" placeholder="Фамилия" autofocus required>   </br>
        <input id="middlename" type="text" placeholder="Отчество" autofocus required> </br>
        <input id="passport"  maxlength="4" type="text"  placeholder="Пасспорт" required> </br>
        <input id="birthday"  maxlength="10" type="text" placeholder="Дата рождения" autofocus required> </br>
    </fieldset>
        <button onclick="onButton()">Регистрация</button>
        </td>
    </table>
</body>
</html>
